# Бизнес-операции

В системе реализовано пять аналитических бизнес-операций. Каждая из них работает на основе данных, сохранённых в базе, и выполняет выборку или агрегирование информации, связанной с фильмами, залами, сеансами и продажей билетов.

1. Топ фильмов по длительности

Маршрут: GET /api/analytics/top-longest-movies

Операция возвращает список всех фильмов, отсортированных по длительности по убыванию.
Используется для анализа того, какие фильмы являются самыми длинными и, соответственно, занимают больше всего экранного времени. Длительность фильма берётся из соответствующего поля сущности Movie.

2. Самые прибыльные сеансы

Маршрут: GET /api/analytics/top-revenue-screenings

Операция вычисляет суммарный доход для каждого сеанса.
Доход рассчитывается как сумма цен всех билетов, связанных с данным сеансом.
Результат содержит список сеансов, отсортированных по суммарному доходу по убыванию.
Операция применяется для оценки финансовой эффективности конкретных показов в разные даты и в разных залах.

3. Самые популярные залы

Маршрут: GET /api/analytics/top-halls

Операция определяет популярность залов, основываясь на количестве проданных билетов.
Для каждого зала подсчитывается общее число билетов, приобретённых на сеансы, проводимые в этом зале.
Залы сортируются по популярности в порядке убывания.
Данный отчёт позволяет оценить загрузку залов и помогает в планировании расписания.

4. Самые активные клиенты

Маршрут: GET /api/analytics/top-customers

Операция вычисляет, какие клиенты посетили кинотеатр чаще всего.
Для каждого клиента подсчитывается количество купленных билетов.
В результате возвращается список клиентов, отсортированный по количеству покупок по убыванию.
Операция предназначена для анализа клиентской активности и формирования программ лояльности.

5. Самые популярные фильмы по количеству проданных билетов

Маршрут: GET /api/analytics/top-movies-by-tickets

Операция определяет популярность фильмов на основании количества проданных билетов на их сеансы.
Для каждого фильма подсчитывается общее число билетов, проданных на все связанные с ним сеансы.
Фильмы сортируются по популярности по убыванию.
Этот отчёт позволяет оценить интерес зрителей к разным фильмам, независимо от длительности и времени показа.
